{% extends 'adminapp/base.html' %}
{% load static %}

{% block content %}
    <!-- partial -->
    <div class="main-panel">
      <div class="content-wrapper">
        <div class="row">
          <div class="col-12 grid-margin stretch-card">
            {% comment %}<div class="card corona-gradient-card">
              <div class="card-body py-0 px-0 px-sm-3">
                <div class="row align-items-center">
                  <div class="col-4 col-sm-3 col-xl-2">
                    <img src="assets/images/dashboard/Group126@2x.png" class="gradient-corona-img img-fluid" alt="">
                  </div> 
                  <div class="col-5 col-sm-7 col-xl-8 p-0">
                    <h4 class="mb-1 mb-sm-0">Want even more features?</h4>
                    <p class="mb-0 font-weight-normal d-none d-sm-block">Check out our Pro version with 5 unique layouts!</p>
                  </div>
                  <div class="col-3 col-sm-2 col-xl-2 pl-0 text-center">
                    <span>
                      <a href="https://www.bootstrapdash.com/product/corona-admin-template/" target="_blank" class="btn btn-outline-light btn-rounded get-started-btn">Upgrade to PRO</a>
                    </span>
                  </div>
                </div>
              </div>
            </div>{% endcomment %}
          </div>
        </div>
        <div class="row">
          <div class="col-xl-3 col-sm-6 grid-margin stretch-card">
            <div class="card">
              <div class="card-body">
                <div class="row">
                  <div class="col-9">
                    <div class="">
                      <h4 class="text-muted font-weight-normal">Users Count</h4>
                      <h3 class="mt-5">{{ user_count }}</h3>
                    </div>
                  </div>
                  {% comment %} <div class="col-3">
                    <div class="icon icon-box-success ">
                      <span class="mdi mdi-arrow-top-right icon-item"></span>
                    </div>
                  </div> {% endcomment %}
                </div>
              </div>
            </div>
          </div>
          <div class="col-xl-3 col-sm-6 grid-margin stretch-card">
            <div class="card">
              <div class="card-body">
                <div class="row">
                  <div class="col-9">
                    <div class="">
                      <h4 class="text-muted font-weight-normal">Total Orders</h4>
                      <h3 class="mt-5">{{ order_count }}</h3>
                    </div>
                  </div>
                  {% comment %} <div class="col-3">
                    <div class="icon icon-box-success">
                      <span class="mdi mdi-arrow-top-right icon-item"></span>
                    </div>
                  </div> {% endcomment %}
                </div>
              </div>
            </div>
          </div>
          <div class="col-xl-3 col-sm-6 grid-margin stretch-card">
            <div class="card">
              <div class="card-body">
                <div class="row">
                  <div class="col-9">
                    <div class="">
                      <h4 class="text-muted font-weight-normal">Todays Order</h4>
                      <h3 class="mt-5">{{ todays_order }}</h3>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div class="col-xl-3 col-sm-6 grid-margin stretch-card">
            <div class="card">
              <div class="card-body">
                <div class="row">
                  <div class="col-9">
                    <div class="">
                      <h4 class="text-muted font-weight-normal">Todays Income</h4>
                      <h3 class="mt-5">Inr {{ todays_income  }}</h3>                                                                   
                    </div>
                  </div>
                  {% comment %} <div class="col-3">
                    <div class="icon icon-box-danger">
                      <span class="mdi mdi-arrow-bottom-left icon-item"></span>
                    </div>
                  </div> {% endcomment %}
                </div>                
              </div>
            </div>
          </div>
          <div class="col-xl-3 col-sm-6 grid-margin stretch-card">
            <div class="card">
              <div class="card-body">
                <div class="row">
                  <div class="col-9">
                    <div class="">
                      <h4 class="text-muted font-weight-normal">COD Revenue</h4>
                      <h3 class="mt-5">Inr {{ cod_income }}</h3>
                    </div>
                  </div>
                  {% comment %} <div class="col-3">
                    <div class="icon icon-box-success ">
                      <span class="mdi mdi-arrow-top-right icon-item"></span>
                    </div>
                  </div> {% endcomment %}
                </div>
              </div>
            </div>
          </div>
          <div class="col-xl-3 col-sm-6 grid-margin stretch-card">
            <div class="card">
              <div class="card-body">
                <div class="row">
                  <div class="col-9">
                    <div class="">
                      <h4 class="text-muted font-weight-normal">Razorpay</h4>
                      <h3 class="mt-5">Inr {{ razor_income }}</h3>
                    </div>
                  </div>
                  {% comment %} <div class="col-3">
                    <div class="icon icon-box-success ">
                      <span class="mdi mdi-arrow-top-right icon-item"></span>
                    </div>
                  </div> {% endcomment %}
                </div>
              </div>
            </div>
          </div>
          <div class="col-xl-3 col-sm-6 grid-margin stretch-card">
            <div class="card">
              <div class="card-body">
                <div class="row">
                  <div class="col-9">
                    <div class="">
                      <h4 class="text-muted font-weight-normal">Total Sale</h4>
                      <h3 class="mt-5">Inr {{ total_sale }}</h3>
                    </div>
                  </div>
                  {% comment %} <div class="col-3">
                    <div class="icon icon-box-success ">
                      <span class="mdi mdi-arrow-top-right icon-item"></span>
                    </div>
                  </div> {% endcomment %}
                </div>
              </div>
            </div>
          </div>
        </div>
        
      
      <!-- partial -->
      <div class="container">
        <div class="row my-5">
            <div class="col-md-6">
              <h3 class="text-center">Payment Status</h3>
                <div class="bg-white">
                    <canvas id="myChart1" width="400" height="300"></canvas>
                    <script>
                        var ctx = document.getElementById('myChart1').getContext('2d');
                        var myChart1 = new Chart(ctx, {
                            type: 'pie',
                            data: {
                                labels: ['COD:{{ cod_percent }}%','Pending Pay:{{ pending_percent }}%', 'Online: {{razor_percent}}%'],
                                datasets: [{
                                    label: 'Total Income',
                                    data: [{{cod_income}},{{cod_pending}},{{razor_income}}],
                                    backgroundColor: [
                                        'rgba(255, 99, 132, 1)',
                                        'rgba(54, 162, 235, 1)',
                                        'rgba(255, 206, 86, 1)',
                                        'rgba(75, 192, 192, 1)',
                                        'rgba(153, 102, 255, 1)',
                                        'rgba(255, 159, 64, 1)'
                                    ],
                                    borderColor: [
                                        'rgba(255, 99, 132, 1)',
                                        'rgba(54, 162, 235, 1)',
                                        'rgba(255, 206, 86, 1)',
                                        'rgba(75, 192, 192, 1)',
                                        'rgba(153, 102, 255, 1)',
                                        'rgba(255, 159, 64, 1)'
                                    ],
                                    borderWidth: 1
                                }]
                            },
                            options: {
                                scales: {
                                    yAxes: [{
                                        ticks: {
                                            beginAtZero: true
                                        }
                                    }]
                                }
                            }
                        });
                    </script>
                </div>
            </div>
            <div class="col-md-6">
              <h3 class="text-center">Daily Income Graph</h3>
                <div class="bg-white">
                    <canvas id="myChart" width="400" height="300"></canvas>
                    <script>
                        var ctx = document.getElementById('myChart').getContext('2d');
                        var myChart = new Chart(ctx, {
                            type: 'bar',
                            data: {
                                labels: [{% for income in daily_income %}'{{income.date|date:"M d"}}',{% endfor %}],
                                datasets: [{
                                    label: 'Sale',
                                    data: [{% for income in daily_income %}{{ income.total_income }},{% endfor %}],
                                    backgroundColor: [
                                        'rgba(255, 99, 132, 1)',
                                        'rgba(54, 162, 235, 1)',
                                        'rgba(255, 206, 86, 1)',
                                        'rgba(75, 192, 192, 1)',
                                        'rgba(153, 102, 255, 1)',
                                        'rgba(255, 159, 64, 1)'
                                    ],
                                    borderColor: [
                                        'rgba(255, 99, 132, 1)',
                                        'rgba(54, 162, 235, 1)',
                                        'rgba(255, 206, 86, 1)',
                                        'rgba(75, 192, 192, 1)',
                                        'rgba(153, 102, 255, 1)',
                                        'rgba(255, 159, 64, 1)'
                                    ],
                                    borderWidth: 1
                                }]
                            },
                            options: {
                                scales: {
                                    yAxes: [{
                                        ticks: {
                                            beginAtZero: true
                                        }
                                    }]
                                }
                            }
                        });
                    </script>

                    {% comment %} <script>
                      var ctx = document.getElementById('myChart').getContext('2d');
                      var myChart = new Chart(ctx, {
                          type: 'bar',
                          data: {
                              labels: [{% for income in daily_income %}'{{ income.created_at|date:"M d" }}',{% endfor %}],
                              datasets: [{
                                  label: 'Daily Revenue',
                                  data: [{% for income in daily_income %}{{ income.total_income }},{% endfor %}],
                                  backgroundColor: 'blue',
                                  borderColor: 'blue',
                                  borderWidth: 1
                              }]
                          },
                          options: {
                              scales: {
                                  yAxes: [{
                                      ticks: {
                                          beginAtZero: true,
                                          callback: function(value, index, values) {
                                              return '$' + value.toFixed(2);
                                          }
                                      }
                                  }],
                                  xAxes: [{
                                      type: 'time',
                                      time: {
                                          unit: 'day',
                                          displayFormats: {
                                              day: 'MMM DD'
                                          }
                                      },
                                      ticks: {
                                          maxRotation: 0,
                                          autoSkip: true,
                                          maxTicksLimit: 8
                                      }
                                  }]
                              }
                          }
                      });
                  </script> {% endcomment %}
                </div>
            </div>
        </div>
    </div>
    </div> 
    <!-- main-panel ends -->
{% endblock content %}
  
        
      